
(function(e,t,n){"use strict";var r=t.event,i;r.special.smartresize={setup:function(){t(this).bind("resize",r.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",r.special.smartresize.handler)},handler:function(e,t){var n=this,s=arguments;e.type="smartresize",i&&clearTimeout(i),i=setTimeout(function(){r.dispatch.apply(n,s)},t==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Mason=function(e,n){this.element=t(n),this._create(e),this._init()},t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},t.Mason.prototype={_filterFindBricks:function(e){var t=this.options.itemSelector;return t?e.filter(t).add(e.find(t)):e},_getBricks:function(e){var t=this._filterFindBricks(e).css({position:"absolute"}).addClass("masonry-brick");return t},_create:function(n){this.options=t.extend(!0,{},t.Mason.settings,n),this.styleQueue=[];var r=this.element[0].style;this.originalStyle={height:r.height||""};var i=this.options.containerStyle;for(var s in i)this.originalStyle[s]=r[s]||"";this.element.css(i),this.horizontalDirection=this.options.isRTL?"right":"left";var o=this.element.css("padding-"+this.horizontalDirection),u=this.element.css("padding-top");this.offset={x:o?parseInt(o,10):0,y:u?parseInt(u,10):0},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var a=this;setTimeout(function(){a.element.addClass("masonry")},0),this.options.isResizable&&t(e).bind("smartresize.masonry",function(){a.resize()}),this.reloadItems()},_init:function(e){this._getColumns(),this._reLayout(e)},option:function(e,n){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))},layout:function(e,t){for(var n=0,r=e.length;n<r;n++)this._placeBrick(e[n]);var i={};i.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var s=0;n=this.cols;while(--n){if(this.colYs[n]!==0)break;s++}i.width=(this.cols-s)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:i});var o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",u=this.options.animationOptions,a;for(n=0,r=this.styleQueue.length;n<r;n++)a=this.styleQueue[n],a.$el[o](a.style,u);this.styleQueue=[],t&&t.call(e),this.isLaidOut=!0},_getColumns:function(){var e=this.options.isFitWidth?this.element.parent():this.element,t=e.width();this.columnWidth=this.isFluid?this.options.columnWidth(t):this.options.columnWidth||this.$bricks.outerWidth(!0)||t,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((t+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(e){var n=t(e),r,i,s,o,u;r=Math.ceil(n.outerWidth(!0)/this.columnWidth),r=Math.min(r,this.cols);if(r===1)s=this.colYs;else{i=this.cols+1-r,s=[];for(u=0;u<i;u++)o=this.colYs.slice(u,u+r),s[u]=Math.max.apply(Math,o)}var a=Math.min.apply(Math,s),f=0;for(var l=0,c=s.length;l<c;l++)if(s[l]===a){f=l;break}var h={top:a+this.offset.y};h[this.horizontalDirection]=this.columnWidth*f+this.offset.x,this.styleQueue.push({$el:n,style:h});var p=a+n.outerHeight(!0),d=this.cols+1-c;for(l=0;l<d;l++)this.colYs[f+l]=p},resize:function(){var e=this.cols;this._getColumns(),(this.isFluid||this.cols!==e)&&this._reLayout()},_reLayout:function(e){var t=this.cols;this.colYs=[];while(t--)this.colYs.push(0);this.layout(this.$bricks,e)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(e){this.reloadItems(),this._init(e)},appended:function(e,t,n){if(t){this._filterFindBricks(e).css({top:this.element.height()});var r=this;setTimeout(function(){r._appended(e,n)},1)}else this._appended(e,n)},_appended:function(e,t){var n=this._getBricks(e);this.$bricks=this.$bricks.add(n),this.layout(n,t)},remove:function(e){this.$bricks=this.$bricks.not(e),e.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),t(e).unbind(".masonry")}},t.fn.imagesLoaded=function(e){function u(){e.call(n,r)}function a(e){var n=e.target;n.src!==s&&t.inArray(n,o)===-1&&(o.push(n),--i<=0&&(setTimeout(u),r.unbind(".imagesLoaded",a)))}var n=this,r=n.find("img").add(n.filter("img")),i=r.length,s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o=[];return i||u(),r.bind("load.imagesLoaded error.imagesLoaded",a).each(function(){var e=this.src;this.src=s,this.src=e}),n};var s=function(t){e.console&&e.console.error(t)};t.fn.masonry=function(e){if(typeof e=="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"masonry");if(!r){s("cannot call methods on masonry prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(r[e])||e.charAt(0)==="_"){s("no such method '"+e+"' for masonry instance");return}r[e].apply(r,n)})}else this.each(function(){var n=t.data(this,"masonry");n?(n.option(e||{}),n._init()):t.data(this,"masonry",new t.Mason(e,this))});return this}})(window,jQuery);window.Modernizr=function(e,t,n){function r(){}function i(e,t){var n=e.charAt(0).toUpperCase()+e.substr(1),r=(e+" "+S.join(n+" ")+n).split(" ");return!!s(r,t)}function s(e,t){for(var r in e)if(g[e[r]]!==n&&(!t||t(e[r],m)))return!0}function o(e,t){return(""+e).indexOf(t)!==-1}function u(e,t){return typeof e===t}function a(e,t){return f(E.join(e+";")+(t||""))}function f(e){g.cssText=e}var l="1.7",c={},h=!0,p=t.documentElement,d=t.head||t.getElementsByTagName("head")[0],v="modernizr",m=t.createElement(v),g=m.style,y=t.createElement("input"),b=":)",w=Object.prototype.toString,E=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),S="Webkit Moz O ms Khtml".split(" "),x={svg:"http://www.w3.org/2000/svg"},T={},N={},C={},k=[],L,A=function(e){var n=t.createElement("style"),r=t.createElement("div"),i;n.textContent=e+"{#modernizr{height:3px}}",d.appendChild(n),r.id="modernizr",p.appendChild(r),i=r.offsetHeight===3,n.parentNode.removeChild(n),r.parentNode.removeChild(r);return!!i},O=function(){function e(e,i){i=i||t.createElement(r[e]||"div");var s=(e="on"+e)in i;s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),s=u(i[e],"function"),u(i[e],n)||(i[e]=n),i.removeAttribute(e))),i=null;return s}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),M={}.hasOwnProperty,_;u(M,n)||u(M.call,n)?_=function(e,t){return t in e&&u(e.constructor.prototype[t],n)}:_=function(e,t){return M.call(e,t)},T.csstransitions=function(){return i("transitionProperty")};for(var D in T)_(T,D)&&(L=D.toLowerCase(),c[L]=T[D](),k.push((c[L]?"":"no-")+L));c.input||r(),c.crosswindowmessaging=c.postmessage,c.historymanagement=c.history,c.addTest=function(e,t){e=e.toLowerCase();if(!c[e]){t=!!t(),p.className+=" "+(t?"":"no-")+e,c[e]=t;return c}},f(""),m=y=null,c._enableHTML5=h,c._version=l,p.className=p.className.replace(/\bno-js\b/,"")+" js "+k.join(" ");return c}(this,this.document)var sigma={tools:{},classes:{},instances:{}};(function(){Array.prototype.some||(Array.prototype.some=function(e,t){var n=this.length;if("function"!=typeof e)throw new TypeError;for(var r=0;r<n;r++)if(r in this&&e.call(t,this[r],r,this))return!0;return!1});Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n=this.length;if("function"!=typeof e)throw new TypeError;for(var r=0;r<n;r++)r in this&&e.call(t,this[r],r,this)});Array.prototype.map||(Array.prototype.map=function(e,t){var n=this.length;if("function"!=typeof e)throw new TypeError;for(var r=Array(n),i=0;i<n;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r});Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=this.length;if("function"!=typeof e)throw new TypeError;for(var r=[],i=0;i<n;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r});Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n="toString,toLocaleString,valueOf,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,constructor".split(","),r=n.length;return function(s){if("object"!==typeof s&&"function"!==typeof s||null===s)throw new TypeError("Object.keys called on non-object");var o=[],u;for(u in s)e.call(s,u)&&o.push(u);if(t)for(u=0;u<r;u++)e.call(s,n[u])&&o.push(n[u]);return o}}())})();sigma.classes.Cascade=function(){this.p={};this.config=function(e,t){if("string"==typeof e&&void 0==t)return this.p[e];var n="object"==typeof e&&void 0==t?e:{};"string"==typeof e&&(n[e]=t);for(var r in n)void 0!=this.p[r]&&(this.p[r]=n[r]);return this}};sigma.classes.EventDispatcher=function(){var e={},t=this;this.one=function(n,r){if(!r||!n)return t;("string"==typeof n?n.split(" "):n).forEach(function(t){e[t]||(e[t]=[]);e[t].push({h:r,one:!0})});return t};this.bind=function(n,r){if(!r||!n)return t;("string"==typeof n?n.split(" "):n).forEach(function(t){e[t]||(e[t]=[]);e[t].push({h:r,one:!1})});return t};this.unbind=function(n,r){n||(e={});var s="string"==typeof n?n.split(" "):n;r?s.forEach(function(t){e[t]&&(e[t]=e[t].filter(function(e){return e.h!=r}));e[t]&&0==e[t].length&&delete e[t]}):s.forEach(function(t){delete e[t]});return t};this.dispatch=function(n,r){e[n]&&(e[n].forEach(function(e){e.h({type:n,content:r,target:t})}),e[n]=e[n].filter(function(e){return!e.one}));return t}};(function(){function n(e,t){function n(){var e;e="<p>GLOBAL :</p>";for(var t in r.p.globalProbes)e+="<p>"+t+" : "+r.p.globalProbes[t]()+"</p>";e+="<br><p>LOCAL :</p>";for(t in r.p.localProbes)e+="<p>"+t+" : "+r.p.localProbes[t]()+"</p>";r.p.dom.innerHTML=e;return r}sigma.classes.Cascade.call(this);var r=this;this.instance=e;this.monitoring=!1;this.p={fps:40,dom:t,globalProbes:{"Time (ms)":sigma.chronos.getExecutionTime,Queue:sigma.chronos.getQueuedTasksCount,Tasks:sigma.chronos.getTasksCount,FPS:sigma.chronos.getFPS},localProbes:{"Nodes count":function(){return r.instance.graph.nodes.length},"Edges count":function(){return r.instance.graph.edges.length}}};this.activate=function(){r.monitoring||(r.monitoring=window.setInterval(n,1e3/r.p.fps));return r};this.desactivate=function(){r.monitoring&&(window.clearInterval(r.monitoring),r.monitoring=null,r.p.dom.innerHTML="");return r}}function r(e){function t(e){i.p.mouseEnabled&&(n(i.mouseX,i.mouseY,i.ratio*(0<(void 0!=e.wheelDelta&&e.wheelDelta||void 0!=e.detail&&-e.detail)?i.p.zoomMultiply:1/i.p.zoomMultiply)),i.p.blockScroll&&(e.preventDefault?e.preventDefault():e.returnValue=!1))}function n(e,t,n){if(!i.isMouseDown&&(window.clearInterval(i.interpolationID),g=void 0!=n,u=i.stageX,l=e,a=i.stageY,c=t,f=n||i.ratio,f=Math.min(Math.max(f,i.p.minRatio),i.p.maxRatio),m=i.p.directZooming?1-(g?i.p.zoomDelta:i.p.dragDelta):0,i.ratio!=f||i.stageX!=l||i.stageY!=c))r(),i.interpolationID=window.setInterval(r,50),i.dispatch("startinterpolate")}function r(){m+=g?i.p.zoomDelta:i.p.dragDelta;m=Math.min(m,1);var e=sigma.easing.quadratic.easeout(m),t=i.ratio;i.ratio=t*(1-e)+f*e;g?(i.stageX=l+(i.stageX-l)*i.ratio/t,i.stageY=c+(i.stageY-c)*i.ratio/t):(i.stageX=u*(1-e)+l*e,i.stageY=a*(1-e)+c*e);i.dispatch("interpolate");1<=m&&(window.clearInterval(i.interpolationID),e=i.ratio,g?(i.ratio=f,i.stageX=l+(i.stageX-l)*i.ratio/e,i.stageY=c+(i.stageY-c)*i.ratio/e):(i.stageX=l,i.stageY=c),i.dispatch("stopinterpolate"))}sigma.classes.Cascade.call(this);sigma.classes.EventDispatcher.call(this);var i=this;this.p={minRatio:1,maxRatio:32,marginRatio:1,zoomDelta:.1,dragDelta:.3,zoomMultiply:2,directZooming:!1,blockScroll:!0,inertia:1.1,mouseEnabled:!0};var s=0,o=0,u=0,a=0,f=1,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=!1;this.stageY=this.stageX=0;this.ratio=1;this.mouseY=this.mouseX=0;this.isMouseDown=!1;e.addEventListener("DOMMouseScroll",t,!0);e.addEventListener("mousewheel",t,!0);e.addEventListener("mousemove",function(e){i.mouseX=void 0!=e.offsetX&&e.offsetX||void 0!=e.layerX&&e.layerX||void 0!=e.clientX&&e.clientX;i.mouseY=void 0!=e.offsetY&&e.offsetY||void 0!=e.layerY&&e.layerY||void 0!=e.clientY&&e.clientY;if(i.isMouseDown){var t=i.mouseX-s+u,n=i.mouseY-o+a;if(t!=i.stageX||n!=i.stageY)p=h,v=d,h=t,d=n,i.stageX=t,i.stageY=n,i.dispatch("drag")}i.dispatch("move");e.preventDefault?e.preventDefault():e.returnValue=!1},!0);e.addEventListener("mousedown",function(e){i.p.mouseEnabled&&(i.isMouseDown=!0,i.dispatch("mousedown"),u=i.stageX,a=i.stageY,s=i.mouseX,o=i.mouseY,p=h=i.stageX,v=d=i.stageY,i.dispatch("startdrag"),e.preventDefault?e.preventDefault():e.returnValue=!1)},!0);document.addEventListener("mouseup",function(e){i.p.mouseEnabled&&i.isMouseDown&&(i.isMouseDown=!1,i.dispatch("mouseup"),(u!=i.stageX||a!=i.stageY)&&n(i.stageX+i.p.inertia*(i.stageX-p),i.stageY+i.p.inertia*(i.stageY-v)),e.preventDefault?e.preventDefault():e.returnValue=!1)},!0);this.checkBorders=function(){return i};this.interpolate=n}function i(e,i){function s(){sigma.chronos.removeTask("node_"+p.id,2).removeTask("edge_"+p.id,2).removeTask("label_"+p.id,2).stopTasks();return p}function a(e,t){p.domElements[e]=document.createElement(t);p.domElements[e].style.position="absolute";p.domElements[e].setAttribute("id","sigma_"+e+"_"+p.id);p.domElements[e].setAttribute("class","sigma_"+e+"_"+t);p.domElements[e].setAttribute("width",p.width+"px");p.domElements[e].setAttribute("height",p.height+"px");p.domRoot.appendChild(p.domElements[e]);return p}function c(){p.p.drawHoverNodes&&(p.graph.checkHover(p.mousecaptor.mouseX,p.mousecaptor.mouseY),p.graph.nodes.forEach(function(e){e.hover&&!e.active&&p.plotter.drawHoverNode(e)}));return p}function h(){p.p.drawActiveNodes&&p.graph.nodes.forEach(function(e){e.active&&p.plotter.drawActiveNode(e)});return p}sigma.classes.Cascade.call(this);sigma.classes.EventDispatcher.call(this);var p=this;this.id=i.toString();this.p={auto:!0,drawNodes:2,drawEdges:1,drawLabels:2,lastNodes:2,lastEdges:0,lastLabels:2,drawHoverNodes:!0,drawActiveNodes:!0};this.domRoot=e;this.width=this.domRoot.offsetWidth;this.height=this.domRoot.offsetHeight;this.graph=new o;this.domElements={};a("edges","canvas");a("nodes","canvas");a("labels","canvas");a("hover","canvas");a("monitor","div");a("mouse","canvas");this.plotter=new u(this.domElements.nodes.getContext("2d"),this.domElements.edges.getContext("2d"),this.domElements.labels.getContext("2d"),this.domElements.hover.getContext("2d"),this.graph,this.width,this.height);this.monitor=new n(this,this.domElements.monitor);this.mousecaptor=new r(this.domElements.mouse,this.id);this.mousecaptor.bind("drag interpolate",function(){p.draw(p.p.auto?2:p.p.drawNodes,p.p.auto?0:p.p.drawEdges,p.p.auto?2:p.p.drawLabels,!0)}).bind("stopdrag stopinterpolate",function(){p.draw(p.p.auto?2:p.p.drawNodes,p.p.auto?1:p.p.drawEdges,p.p.auto?2:p.p.drawLabels,!0)}).bind("mousedown mouseup",function(e){var t=p.graph.nodes.filter(function(e){return!!e.hover}).map(function(e){return e.id});p.dispatch("mousedown"==e.type?"downgraph":"upgraph");t.length&&p.dispatch("mousedown"==e.type?"downnodes":"upnodes",t)}).bind("move",function(){p.domElements.hover.getContext("2d").clearRect(0,0,p.domElements.hover.width,p.domElements.hover.height);c();h()});sigma.chronos.bind("startgenerators",function(){sigma.chronos.getGeneratorsIDs().some(function(e){return!!e.match(RegExp("_ext_"+p.id+"$",""))})&&p.draw(p.p.auto?2:p.p.drawNodes,p.p.auto?0:p.p.drawEdges,p.p.auto?2:p.p.drawLabels)}).bind("stopgenerators",function(){p.draw()});for(var d=0;d<t.length;d++)t[d](this);this.draw=function(e,t,n,r){if(r&&sigma.chronos.getGeneratorsIDs().some(function(e){return!!e.match(RegExp("_ext_"+p.id+"$",""))}))return p;e=void 0==e?p.p.drawNodes:e;t=void 0==t?p.p.drawEdges:t;n=void 0==n?p.p.drawLabels:n;r={nodes:e,edges:t,labels:n};p.p.lastNodes=e;p.p.lastEdges=t;p.p.lastLabels=n;s();p.graph.rescale(p.width,p.height,0<e,0<t).setBorders();p.mousecaptor.checkBorders(p.graph.borders,p.width,p.height);p.graph.translate(p.mousecaptor.stageX,p.mousecaptor.stageY,p.mousecaptor.ratio,0<e,0<t);p.dispatch("graphscaled");for(var i in p.domElements)"canvas"==p.domElements[i].nodeName.toLowerCase()&&(void 0==r[i]||0<=r[i])&&p.domElements[i].getContext("2d").clearRect(0,0,p.domElements[i].width,p.domElements[i].height);p.plotter.currentEdgeIndex=0;p.plotter.currentNodeIndex=0;p.plotter.currentLabelIndex=0;i=null;r=!1;if(e)if(1<e)for(;p.plotter.task_drawNode(););else sigma.chronos.addTask(p.plotter.task_drawNode,"node_"+p.id,!1),r=!0,i="node_"+p.id;if(n)if(1<n)for(;p.plotter.task_drawLabel(););else i?sigma.chronos.queueTask(p.plotter.task_drawLabel,"label_"+p.id,i):sigma.chronos.addTask(p.plotter.task_drawLabel,"label_"+p.id,!1),r=!0,i="label_"+p.id;if(t)if(1<t)for(;p.plotter.task_drawEdge(););else i?sigma.chronos.queueTask(p.plotter.task_drawEdge,"edge_"+p.id,i):sigma.chronos.addTask(p.plotter.task_drawEdge,"edge_"+p.id,!1),r=!0,i="edge_"+p.id;p.dispatch("draw");p.refresh();r&&sigma.chronos.runTasks();return p};this.resize=function(e,t){var n=p.width,r=p.height;void 0!=e&&void 0!=t?(p.width=e,p.height=t):(p.width=p.domRoot.offsetWidth,p.height=p.domRoot.offsetHeight);if(n!=p.width||r!=p.height){for(var i in p.domElements)p.domElements[i].setAttribute("width",p.width+"px"),p.domElements[i].setAttribute("height",p.height+"px");p.plotter.resize(p.width,p.height);p.draw(p.p.lastNodes,p.p.lastEdges,p.p.lastLabels,!0)}return p};this.refresh=function(){p.domElements.hover.getContext("2d").clearRect(0,0,p.domElements.hover.width,p.domElements.hover.height);c();h();return p};this.drawHover=c;this.drawActive=h;this.clearSchedule=s;window.addEventListener("resize",function(){p.resize()})}function s(e){var t=this;sigma.classes.EventDispatcher.call(this);this._core=e;this.kill=function(){};this.getID=function(){return e.id};this.configProperties=function(n,r){var i=e.config(n,r);return i==e?t:i};this.drawingProperties=function(n,r){var i=e.plotter.config(n,r);return i==e.plotter?t:i};this.mouseProperties=function(n,r){var i=e.mousecaptor.config(n,r);return i==e.mousecaptor?t:i};this.graphProperties=function(n,r){var i=e.graph.config(n,r);return i==e.graph?t:i};this.getMouse=function(){return{mouseX:e.mousecaptor.mouseX,mouseY:e.mousecaptor.mouseY,down:e.mousecaptor.isMouseDown}};this.position=function(n,r,i){if(0==arguments.length)return{stageX:e.mousecaptor.stageX,stageY:e.mousecaptor.stageY,ratio:e.mousecaptor.ratio};e.mousecaptor.stageX=void 0!=n?n:e.mousecaptor.stageX;e.mousecaptor.stageY=void 0!=r?r:e.mousecaptor.stageY;e.mousecaptor.ratio=void 0!=i?i:e.mousecaptor.ratio;return t};this.goTo=function(n,r,i){e.mousecaptor.interpolate(n,r,i);return t};this.zoomTo=function(n,r,i){i=Math.min(Math.max(e.mousecaptor.config("minRatio"),i),e.mousecaptor.config("maxRatio"));i==e.mousecaptor.ratio?e.mousecaptor.interpolate(n-e.width/2+e.mousecaptor.stageX,r-e.height/2+e.mousecaptor.stageY):e.mousecaptor.interpolate((i*n-e.mousecaptor.ratio*e.width/2)/(i-e.mousecaptor.ratio),(i*r-e.mousecaptor.ratio*e.height/2)/(i-e.mousecaptor.ratio),i);return t};this.resize=function(n,r){e.resize(n,r);return t};this.draw=function(n,r,i,s){e.draw(n,r,i,s);return t};this.refresh=function(){e.refresh();return t};this.addGenerator=function(n,r,i){sigma.chronos.addGenerator(n+"_ext_"+e.id,r,i);return t};this.removeGenerator=function(n){sigma.chronos.removeGenerator(n+"_ext_"+e.id);return t};this.addNode=function(n,r){e.graph.addNode(n,r);return t};this.addEdge=function(n,r,i,s){e.graph.addEdge(n,r,i,s);return t};this.dropNode=function(n){e.graph.dropNode(n);return t};this.dropEdge=function(n){e.graph.dropEdge(n);return t};this.pushGraph=function(n,r){n.nodes&&n.nodes.forEach(function(n){n.id&&(!r||!e.graph.nodesIndex[n.id])&&t.addNode(n.id,n)});n.edges&&n.edges.forEach(function(n){(validID=n.source&&n.target&&n.id)&&(!r||!e.graph.edgesIndex[n.id])&&t.addEdge(n.id,n.source,n.target,n)});return t};this.emptyGraph=function(){e.graph.empty();return t};this.getNodesCount=function(){return e.graph.nodes.length};this.getEdgesCount=function(){return e.graph.edges.length};this.iterNodes=function(n,r){e.graph.iterNodes(n,r);return t};this.iterEdges=function(n,r){e.graph.iterEdges(n,r);return t};this.getNodes=function(t){return e.graph.getNodes(t)};this.getEdges=function(t){return e.graph.getEdges(t)};this.activateMonitoring=function(){return e.monitor.activate()};this.desactivateMonitoring=function(){return e.monitor.desactivate()};e.bind("downnodes upnodes downgraph upgraph",function(e){t.dispatch(e.type,e.content)});e.graph.bind("overnodes outnodes",function(e){t.dispatch(e.type,e.content)})}function o(){function e(e){return{x:e.x,y:e.y,size:e.size,degree:e.degree,inDegree:e.inDegree,outDegree:e.outDegree,displayX:e.displayX,displayY:e.displayY,displaySize:e.displaySize,label:e.label,id:e.id,color:e.color,fixed:e.fixed,active:e.active,hidden:e.hidden,forceLabel:e.forceLabel,attr:e.attr}}function t(e){return{source:e.source.id,target:e.target.id,size:e.size,type:e.type,weight:e.weight,displaySize:e.displaySize,label:e.label,hidden:e.hidden,id:e.id,attr:e.attr,color:e.color}}function n(){r.nodes=[];r.nodesIndex={};r.edges=[];r.edgesIndex={};return r}sigma.classes.Cascade.call(this);sigma.classes.EventDispatcher.call(this);var r=this;this.p={minNodeSize:0,maxNodeSize:0,minEdgeSize:0,maxEdgeSize:0,scalingMode:"inside",nodesPowRatio:.5,edgesPowRatio:0};this.borders={};n();this.addNode=function(e,t){if(r.nodesIndex[e])throw Error('Node "'+e+'" already exists.');var t=t||{},n={x:0,y:0,size:1,degree:0,inDegree:0,outDegree:0,fixed:!1,active:!1,hidden:!1,forceLabel:!1,label:e.toString(),id:e.toString(),attr:{}},i;for(i in t)switch(i){case"id":break;case"x":case"y":case"size":n[i]=+t[i];break;case"fixed":case"active":case"hidden":case"forceLabel":n[i]=!!t[i];break;case"color":case"label":n[i]=t[i];break;default:n.attr[i]=t[i]}r.nodes.push(n);r.nodesIndex[e.toString()]=n;return r};this.addEdge=function(e,t,n,i){if(r.edgesIndex[e])throw Error('Edge "'+e+'" already exists.');if(!r.nodesIndex[t])throw Error("Edge's source \""+t+'" does not exist yet.');if(!r.nodesIndex[n])throw Error("Edge's target \""+n+'" does not exist yet.');i=i||{};t={source:r.nodesIndex[t],target:r.nodesIndex[n],size:1,weight:1,displaySize:.5,label:e.toString(),id:e.toString(),hidden:!1,attr:{}};t.source.degree++;t.source.outDegree++;t.target.degree++;t.target.inDegree++;for(var s in i)switch(s){case"id":case"source":case"target":break;case"hidden":t[s]=!!i[s];break;case"size":case"weight":t[s]=+i[s];break;case"color":t[s]=i[s].toString();break;case"type":t[s]=i[s].toString();break;case"label":t[s]=i[s];break;default:t.attr[s]=i[s]}r.edges.push(t);r.edgesIndex[e.toString()]=t;return r};this.dropNode=function(e){var t={};((e instanceof Array?e:[e])||[]).forEach(function(e){r.nodesIndex[e]?t[e]=!0:sigma.log('Node "'+e+'" does not exist.')});var n=[];r.nodes.forEach(function(e,r){e.id in t&&(n.unshift(r),0==e.degree&&delete t[e.id])});n.forEach(function(e){r.nodes.splice(e,1)});r.edges=r.edges.filter(function(e){if(e.source.id in t)return delete r.edgesIndex[e.id],e.target.degree--,e.target.inDegree--,!1;return e.target.id in t?(delete r.edgesIndex[e.id],e.source.degree--,e.source.outDegree--,!1):!0});return r};this.dropEdge=function(e){((e instanceof Array?e:[e])||[]).forEach(function(e){if(r.edgesIndex[e]){r.edgesIndex[e].source.degree--;r.edgesIndex[e].source.outDegree--;r.edgesIndex[e].target.degree--;r.edgesIndex[e].target.inDegree--;var t=null;r.edges.some(function(n,r){return n.id==e?(t=r,!0):!1});null!=t&&r.edges.splice(t,1);delete r.edgesIndex[e]}else sigma.log('Edge "'+e+'" does not exist.')});return r};this.iterEdges=function(e,n){var i=n?n.map(function(e){return r.edgesIndex[e]}):r.edges,s=i.map(t);s.forEach(e);i.forEach(function(e,t){var n=s[t],i;for(i in n)switch(i){case"id":case"displaySize":break;case"weight":case"size":e[i]=+n[i];break;case"source":case"target":e[i]=r.nodesIndex[i]||e[i];break;case"hidden":e[i]=!!n[i];break;case"color":case"label":case"type":e[i]=(n[i]||"").toString();break;default:e.attr[i]=n[i]}});return r};this.iterNodes=function(t,n){var i=n?n.map(function(e){return r.nodesIndex[e]}):r.nodes,s=i.map(e);s.forEach(t);i.forEach(function(e,t){var n=s[t],r;for(r in n)switch(r){case"id":case"attr":case"degree":case"inDegree":case"outDegree":case"displayX":case"displayY":case"displaySize":break;case"x":case"y":case"size":e[r]=+n[r];break;case"fixed":case"active":case"hidden":case"forceLabel":e[r]=!!n[r];break;case"color":case"label":e[r]=(n[r]||"").toString();break;default:e.attr[r]=n[r]}});return r};this.getEdges=function(e){var n=((e instanceof Array?e:[e])||[]).map(function(e){return t(r.edgesIndex[e])});return e instanceof Array?n:n[0]};this.getNodes=function(t){var n=((t instanceof Array?t:[t])||[]).map(function(t){return e(r.nodesIndex[t])});return t instanceof Array?n:n[0]};this.empty=n;this.rescale=function(e,t,n,i){var s=0,o=0;n&&r.nodes.forEach(function(e){o=Math.max(e.size,o)});i&&r.edges.forEach(function(e){s=Math.max(e.size,s)});var o=o||1,s=s||1,u,a,f,l;n&&r.nodes.forEach(function(e){a=Math.max(e.x,a||e.x);u=Math.min(e.x,u||e.x);l=Math.max(e.y,l||e.y);f=Math.min(e.y,f||e.y)});var h="outside"==r.p.scalingMode?Math.max(e/Math.max(a-u,1),t/Math.max(l-f,1)):Math.min(e/Math.max(a-u,1),t/Math.max(l-f,1)),p=(r.p.maxNodeSize||o)/h;a+=p;u-=p;l+=p;f-=p;var h="outside"==r.p.scalingMode?Math.max(e/Math.max(a-u,1),t/Math.max(l-f,1)):Math.min(e/Math.max(a-u,1),t/Math.max(l-f,1)),d,v;!r.p.maxNodeSize&&!r.p.minNodeSize?(d=1,v=0):r.p.maxNodeSize==r.p.minNodeSize?(d=0,v=r.p.maxNodeSize):(d=(r.p.maxNodeSize-r.p.minNodeSize)/o,v=r.p.minNodeSize);var m,g;!r.p.maxEdgeSize&&!r.p.minEdgeSize?(m=1,g=0):(m=r.p.maxEdgeSize==r.p.minEdgeSize?0:(r.p.maxEdgeSize-r.p.minEdgeSize)/s,g=r.p.minEdgeSize);n&&r.nodes.forEach(function(n){n.displaySize=n.size*d+v;n.fixed||(n.displayX=(n.x-(a+u)/2)*h+e/2,n.displayY=(n.y-(l+f)/2)*h+t/2)});i&&r.edges.forEach(function(e){e.displaySize=e.size*m+g});return r};this.translate=function(e,t,n,i,s){var o=Math.pow(n,r.p.nodesPowRatio);i&&r.nodes.forEach(function(r){r.fixed||(r.displayX=r.displayX*n+e,r.displayY=r.displayY*n+t);r.displaySize*=o});o=Math.pow(n,r.p.edgesPowRatio);s&&r.edges.forEach(function(e){e.displaySize*=o});return r};this.setBorders=function(){r.borders={};r.nodes.forEach(function(e){r.borders.minX=Math.min(void 0==r.borders.minX?e.displayX-e.displaySize:r.borders.minX,e.displayX-e.displaySize);r.borders.maxX=Math.max(void 0==r.borders.maxX?e.displayX+e.displaySize:r.borders.maxX,e.displayX+e.displaySize);r.borders.minY=Math.min(void 0==r.borders.minY?e.displayY-e.displaySize:r.borders.minY,e.displayY-e.displaySize);r.borders.maxY=Math.max(void 0==r.borders.maxY?e.displayY-e.displaySize:r.borders.maxY,e.displayY-e.displaySize)})};this.checkHover=function(e,t){var n,i,s,o=[],u=[];r.nodes.forEach(function(r){if(r.hidden)r.hover=!1;else{n=Math.abs(r.displayX-e);i=Math.abs(r.displayY-t);s=r.displaySize;var a=r.hover,l=n<s&&i<s&&Math.sqrt(n*n+i*i)<s;a&&!l?(r.hover=!1,u.push(r.id)):l&&!a&&(r.hover=!0,o.push(r.id))}});o.length&&r.dispatch("overnodes",o);u.length&&r.dispatch("outnodes",u);return r}}function u(t,n,r,i,s,o,u){function a(e){var t=i,n="fixed"==l.p.labelSize?l.p.defaultLabelSize:l.p.labelSizeRatio*e.displaySize;t.font=(l.p.hoverFontStyle||l.p.fontStyle||"")+" "+n+"px "+(l.p.hoverFont||l.p.font||"");t.fillStyle="node"==l.p.labelHoverBGColor?e.color||l.p.defaultNodeColor:l.p.defaultHoverLabelBGColor;t.beginPath();l.p.labelHoverShadow&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=4,t.shadowColor=l.p.labelHoverShadowColor);sigma.tools.drawRoundRect(t,Math.round(e.displayX-n/2-2),Math.round(e.displayY-n/2-2),Math.round(t.measureText(e.label).width+1.5*e.displaySize+n/2+4),Math.round(n+4),Math.round(n/2+2),"left");t.closePath();t.fill();t.shadowOffsetX=0;t.shadowOffsetY=0;t.shadowBlur=0;t.beginPath();t.fillStyle="node"==l.p.nodeBorderColor?e.color||l.p.defaultNodeColor:l.p.defaultNodeBorderColor;t.arc(Math.round(e.displayX),Math.round(e.displayY),e.displaySize+l.p.borderSize,0,2*Math.PI,!0);t.closePath();t.fill();t.beginPath();t.fillStyle="node"==l.p.nodeHoverColor?e.color||l.p.defaultNodeColor:l.p.defaultNodeHoverColor;t.arc(Math.round(e.displayX),Math.round(e.displayY),e.displaySize,0,2*Math.PI,!0);t.closePath();t.fill();t.fillStyle="node"==l.p.labelHoverColor?e.color||l.p.defaultNodeColor:l.p.defaultLabelHoverColor;t.fillText(e.label,Math.round(e.displayX+1.5*e.displaySize),Math.round(e.displayY+n/2-3));return l}function f(e){if(isNaN(e.x)||isNaN(e.y))throw Error("A node's coordinate is not a number (id: "+e.id+")");return!e.hidden&&e.displayX+e.displaySize>-c/3&&e.displayX-e.displaySize<4*c/3&&e.displayY+e.displaySize>-h/3&&e.displayY-e.displaySize<4*h/3}sigma.classes.Cascade.call(this);var l=this;this.p={labelColor:"default",defaultLabelColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverShadow:!0,labelHoverShadowColor:"#000",labelHoverColor:"default",defaultLabelHoverColor:"#000",labelActiveBGColor:"default",defaultActiveLabelBGColor:"#fff",labelActiveShadow:!0,labelActiveShadowColor:"#000",labelActiveColor:"default",defaultLabelActiveColor:"#000",labelSize:"fixed",defaultLabelSize:12,labelSizeRatio:2,labelThreshold:6,font:"Arial",hoverFont:"",activeFont:"",fontStyle:"",hoverFontStyle:"",activeFontStyle:"",edgeColor:"source",defaultEdgeColor:"#aaa",defaultEdgeType:"line",defaultNodeColor:"#aaa",nodeHoverColor:"node",defaultNodeHoverColor:"#fff",nodeActiveColor:"node",defaultNodeActiveColor:"#fff",borderSize:0,nodeBorderColor:"node",defaultNodeBorderColor:"#fff",edgesSpeed:200,nodesSpeed:200,labelsSpeed:200};var c=o,h=u;this.currentLabelIndex=this.currentNodeIndex=this.currentEdgeIndex=0;this.task_drawLabel=function(){for(var e=s.nodes.length,t=0;t++<l.p.labelsSpeed&&l.currentLabelIndex<e;)if(l.isOnScreen(s.nodes[l.currentLabelIndex])){var n=s.nodes[l.currentLabelIndex++],i=r;if(n.displaySize>=l.p.labelThreshold||n.forceLabel){var o="fixed"==l.p.labelSize?l.p.defaultLabelSize:l.p.labelSizeRatio*n.displaySize;i.font=l.p.fontStyle+o+"px "+l.p.font;i.fillStyle="node"==l.p.labelColor?n.color||l.p.defaultNodeColor:l.p.defaultLabelColor;i.fillText(n.label,Math.round(n.displayX+1.5*n.displaySize),Math.round(n.displayY+o/2-3))}}else l.currentLabelIndex++;return l.currentLabelIndex<e};this.task_drawEdge=function(){for(var t=s.edges.length,r,i,o=0;o++<l.p.edgesSpeed&&l.currentEdgeIndex<t;)if(e=s.edges[l.currentEdgeIndex],r=e.source,i=e.target,e.hidden||r.hidden||i.hidden||!l.isOnScreen(r)&&!l.isOnScreen(i))l.currentEdgeIndex++;else{r=s.edges[l.currentEdgeIndex++];i=r.source.displayX;var u=r.source.displayY,a=r.target.displayX,f=r.target.displayY,c=r.color;if(!c)switch(l.p.edgeColor){case"source":c=r.source.color||l.p.defaultNodeColor;break;case"target":c=r.target.color||l.p.defaultNodeColor;break;default:c=l.p.defaultEdgeColor}var h=n;switch(r.type||l.p.defaultEdgeType){case"curve":h.strokeStyle=c;h.lineWidth=r.displaySize/3;h.beginPath();h.moveTo(i,u);h.quadraticCurveTo((i+a)/2+(f-u)/4,(u+f)/2+(i-a)/4,a,f);h.stroke();break;default:h.strokeStyle=c,h.lineWidth=r.displaySize/3,h.beginPath(),h.moveTo(i,u),h.lineTo(a,f),h.stroke()}}return l.currentEdgeIndex<t};this.task_drawNode=function(){for(var e=s.nodes.length,n=0;n++<l.p.nodesSpeed&&l.currentNodeIndex<e;)if(l.isOnScreen(s.nodes[l.currentNodeIndex])){var r=s.nodes[l.currentNodeIndex++],i=Math.round(10*r.displaySize)/10,o=t;o.fillStyle=r.color;o.beginPath();o.arc(r.displayX,r.displayY,i,0,2*Math.PI,!0);o.closePath();o.fill();r.hover&&a(r)}else l.currentNodeIndex++;return l.currentNodeIndex<e};this.drawActiveNode=function(e){var t=i;if(!f(e))return l;var n="fixed"==l.p.labelSize?l.p.defaultLabelSize:l.p.labelSizeRatio*e.displaySize;t.font=(l.p.activeFontStyle||l.p.fontStyle||"")+" "+n+"px "+(l.p.activeFont||l.p.font||"");t.fillStyle="node"==l.p.labelHoverBGColor?e.color||l.p.defaultNodeColor:l.p.defaultActiveLabelBGColor;t.beginPath();l.p.labelActiveShadow&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=4,t.shadowColor=l.p.labelActiveShadowColor);sigma.tools.drawRoundRect(t,Math.round(e.displayX-n/2-2),Math.round(e.displayY-n/2-2),Math.round(t.measureText(e.label).width+1.5*e.displaySize+n/2+4),Math.round(n+4),Math.round(n/2+2),"left");t.closePath();t.fill();t.shadowOffsetX=0;t.shadowOffsetY=0;t.shadowBlur=0;t.beginPath();t.fillStyle="node"==l.p.nodeBorderColor?e.color||l.p.defaultNodeColor:l.p.defaultNodeBorderColor;t.arc(Math.round(e.displayX),Math.round(e.displayY),e.displaySize+l.p.borderSize,0,2*Math.PI,!0);t.closePath();t.fill();t.beginPath();t.fillStyle="node"==l.p.nodeActiveColor?e.color||l.p.defaultNodeColor:l.p.defaultNodeActiveColor;t.arc(Math.round(e.displayX),Math.round(e.displayY),e.displaySize,0,2*Math.PI,!0);t.closePath();t.fill();t.fillStyle="node"==l.p.labelActiveColor?e.color||l.p.defaultNodeColor:l.p.defaultLabelActiveColor;t.fillText(e.label,Math.round(e.displayX+1.5*e.displaySize),Math.round(e.displayY+n/2-3));return l};this.drawHoverNode=a;this.isOnScreen=f;this.resize=function(e,t){c=e;h=t;return l}}var t;var a=0;t=void 0;t=[];sigma.init=function(e){e=new i(e,(++a).toString());sigma.instances[a]=new s(e);return sigma.instances[a]};sigma.tools.drawRoundRect=function(e,t,n,r,i,s,o){var s=s?s:0,u=o?o:[],u="string"==typeof u?u.split(" "):u,o=s&&(0<=u.indexOf("topleft")||0<=u.indexOf("top")||0<=u.indexOf("left")),a=s&&(0<=u.indexOf("topright")||0<=u.indexOf("top")||0<=u.indexOf("right")),f=s&&(0<=u.indexOf("bottomleft")||0<=u.indexOf("bottom")||0<=u.indexOf("left")),u=s&&(0<=u.indexOf("bottomright")||0<=u.indexOf("bottom")||0<=u.indexOf("right"));e.moveTo(t,n+s);o?e.arcTo(t,n,t+s,n,s):e.lineTo(t,n);a?(e.lineTo(t+r-s,n),e.arcTo(t+r,n,t+r,n+s,s)):e.lineTo(t+r,n);u?(e.lineTo(t+r,n+i-s),e.arcTo(t+r,n+i,t+r-s,n+i,s)):e.lineTo(t+r,n+i);f?(e.lineTo(t+s,n+i),e.arcTo(t,n+i,t,n+i-s,s)):e.lineTo(t,n+i);e.lineTo(t,n+s)};sigma.tools.getRGB=function(e,t){var e=e.toString(),n={r:0,g:0,b:0};if(3<=e.length&&"#"==e.charAt(0)){var r=e.length-1;6==r?n={r:parseInt(e.charAt(1)+e.charAt(2),16),g:parseInt(e.charAt(3)+e.charAt(4),16),b:parseInt(e.charAt(5)+e.charAt(5),16)}:3==r&&(n={r:parseInt(e.charAt(1)+e.charAt(1),16),g:parseInt(e.charAt(2)+e.charAt(2),16),b:parseInt(e.charAt(3)+e.charAt(3),16)})}t&&(n=[n.r,n.g,n.b]);return n};sigma.tools.rgbToHex=function(e,t,n){return sigma.tools.toHex(e)+sigma.tools.toHex(t)+sigma.tools.toHex(n)};sigma.tools.toHex=function(e){e=parseInt(e,10);if(isNaN(e))return"00";e=Math.max(0,Math.min(e,255));return"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16)};sigma.addPlugin=function(e,n,r){s.prototype[e]=n;t.push(r)};sigma.chronos=new function(){function e(e){window.setTimeout(e,0);return f}function t(){for(f.dispatch("frameinserted");l&&E.length&&n(););!l||!E.length?i():(y=(new Date).getTime(),p++,b=m-d,v=d-b,f.dispatch("insertframe"),e(t))}function n(){x%=E.length;if(!E[x].task()){var e=E[x].taskName;S=S.filter(function(t){t.taskParent==e&&E.push({taskName:t.taskName,task:t.task});return t.taskParent!=e});f.dispatch("killed",E.splice(x--,1)[0])}x++;m=(new Date).getTime()-y;return m<=v}function r(){l=!0;p=x=0;g=y=(new Date).getTime();f.dispatch("start");f.dispatch("insertframe");e(t);return f}function i(){f.dispatch("stop");l=!1;return f}function s(e,t,n){if("function"!=typeof e)throw Error('Task "'+t+'" is not a function');E.push({taskName:t,task:e});l=!(!l&&!(n&&r()||1));return f}function o(e){return e?Object.keys(w).filter(function(e){return!!w[e].on}).length:Object.keys(w).length}function u(){Object.keys(w).length?(f.dispatch("startgenerators"),f.unbind("killed",a),e(function(){for(var e in w)w[e].on=!0,s(w[e].task,e,!1)}),f.bind("killed",a).runTasks()):f.dispatch("stopgenerators");return f}function a(e){void 0!=w[e.content.taskName]&&(w[e.content.taskName].del||!w[e.content.taskName].condition()?delete w[e.content.taskName]:w[e.content.taskName].on=!1,0==o(!0)&&u())}sigma.classes.EventDispatcher.call(this);var f=this,l=!1,c=80,h=0,p=0,d=1e3/c,v=d,m=0,g=0,y=0,b=0,w={},E=[],S=[],x=0;this.frequency=function(e){return void 0!=e?(c=Math.abs(1*e),d=1e3/c,p=0,f):c};this.runTasks=r;this.stopTasks=i;this.insertFrame=e;this.addTask=s;this.queueTask=function(e,t,n){if("function"!=typeof e)throw Error('Task "'+t+'" is not a function');if(!E.concat(S).some(function(e){return e.taskName==n}))throw Error('Parent task "'+n+'" of "'+t+'" is not attached.');S.push({taskParent:n,taskName:t,task:e});return f};this.removeTask=function(e,t){if(void 0==e)E=[],1==t?S=[]:2==t&&(E=S,S=[]),i();else{var n="string"==typeof e?e:"";E=E.filter(function(t){return("string"==typeof e?t.taskName==e:t.task==e)?(n=t.taskName,!1):!0});0<t&&(S=S.filter(function(e){1==t&&e.taskParent==n&&E.push(e);return e.taskParent!=n}))}l=!(E.length&&(!i()||1));return f};this.addGenerator=function(e,t,n){if(void 0!=w[e])return f;w[e]={task:t,condition:n};0==o(!0)&&u();return f};this.removeGenerator=function(e){w[e]&&(w[e].on=!1,w[e].del=!0);return f};this.startGenerators=u;this.getGeneratorsIDs=function(){return Object.keys(w)};this.getFPS=function(){l&&(h=Math.round(1e4*(p/((new Date).getTime()-g)))/10);return h};this.getTasksCount=function(){return E.length};this.getQueuedTasksCount=function(){return S.length};this.getExecutionTime=function(){return y-g};return this};sigma.debugMode=0;sigma.log=function(){if(1==sigma.debugMode)for(var e in arguments)console.log(arguments[e]);else if(1<sigma.debugMode)for(e in arguments)throw Error(arguments[e]);return sigma};sigma.easing={linear:{},quadratic:{}};sigma.easing.linear.easenone=function(e){return e};sigma.easing.quadratic.easein=function(e){return e*e};sigma.easing.quadratic.easeout=function(e){return-e*(e-2)};sigma.easing.quadratic.easeinout=function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)};sigma.publicPrototype=s.prototype})()sigma.classes.FishEye=function(sig){sigma.classes.Cascade.call(this);var self=this;var isActivated=false;this.p={radius:200,power:2};function applyFishEye(mouseX,mouseY){var newDist,newSize,xDist,yDist,dist,radius=self.p.radius,power=self.p.power,powerExp=Math.exp(power);sig.graph.nodes.forEach(function(node){xDist=node.displayX-mouseX;yDist=node.displayY-mouseY;dist=Math.sqrt(xDist*xDist+yDist*yDist);if(dist<radius){newDist=powerExp/(powerExp-1)*radius*(1-Math.exp(-dist/radius*power));newSize=powerExp/(powerExp-1)*radius*(1-Math.exp(-dist/radius*power));if(!node.isFixed){node.displayX=mouseX+xDist*(newDist/dist*3/4+1/4);node.displayY=mouseY+yDist*(newDist/dist*3/4+1/4);}
node.displaySize=Math.min(node.displaySize*newSize/dist,10*node.displaySize);}});};function handler(){applyFishEye(sig.mousecaptor.mouseX,sig.mousecaptor.mouseY);}
this.handler=handler;this.activated=function(v){if(v==undefined){return isActivated;}else{isActivated=v;return this;}};this.refresh=function(){};};sigma.publicPrototype.activateFishEye=function(){if(!this.fisheye){var sigmaInstance=this;var fe=new sigma.classes.FishEye(sigmaInstance._core);sigmaInstance.fisheye=fe;fe.refresh=function refresh(){sigmaInstance.draw(2,2,2);};}
if(!this.fisheye.activated()){this.fisheye.activated(true);this._core.bind('graphscaled',this.fisheye.handler);document.getElementById('sigma_mouse_'+this.getID()).addEventListener('mousemove',this.fisheye.refresh,true);}
return this;};sigma.publicPrototype.desactivateFishEye=function(){if(this.fisheye&&this.fisheye.activated()){this.fisheye.activated(false);this._core.unbind('graphscaled',this.fisheye.handler);document.getElementById('sigma_mouse_'+this.getID()).removeEventListener('mousemove',this.fisheye.refresh,true);}
return this;};sigma.publicPrototype.fishEyeProperties=function(a1,a2){var res=this.fisheye.config(a1,a2);return res==s?this.fisheye:res;};function init(){function getRandomColor(a,b){var r=Math.random();return'rgb('+
((a.r+(b.r-a.r)*r)|0).toString()+','+
((a.g+(b.g-a.g)*r)|0).toString()+','+
((a.b+(b.b-a.b)*r)|0).toString()+')';};var colorFrom={r:200,g:200,b:200};var colorTo={r:200,g:200,b:200};s1=sigma.init(document.getElementById('sigma-1')).configProperties({drawHoverNodes:false}).drawingProperties({labelThreshold:10000,defaultEdgeType:'curve'}).mouseProperties({mouseEnabled:false}).graphProperties({scalingMode:'outside'});var i,N=300,E=300;for(i=0;i<N;i++){s1.addNode(i,{'x':Math.random(),'y':Math.random(),'size':0.5+5*Math.random(),'color':getRandomColor(colorFrom,colorTo)});}
for(i=0;i<E;i++){s1.addEdge(i,Math.random()*N|0,Math.random()*N|0);}
s1.draw();var newParent=document.getElementById('mouselayer-sigma-1');var mouseLayer=document.getElementById('sigma_mouse_1');newParent.appendChild(mouseLayer);mouseLayer.addEventListener('mouseover',function(){s1.activateFishEye();},true);mouseLayer.addEventListener('mouseout',function(){s1.desactivateFishEye().draw(2,2,2);},true);function resize(event){for(var key in sigma.instances){sigma.instances[key].resize();}};window.onresize=resize;resize();}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false);}else{window.onload=init;}